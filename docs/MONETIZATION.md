# MONETIZATION.md - 수익 구조 설계

> MoneyTalk 수익 모델 설계 문서
> **최종 갱신**: 2026-02-18

---

## 1. 현재 구조 (v1.1.0)

### 과금 포인트
| 기능 | 과금 | API 비용 |
|------|------|----------|
| SMS 파싱 (Regex Tier 1) | 무료 | 없음 |
| SMS 파싱 (Vector Tier 2) | 무료 | 없음 (로컬) |
| SMS 파싱 (Gemini Tier 3) | 무료 | **$0.003/건** |
| 카테고리 자동 분류 (Gemini Batch) | 무료 | **$0.001/건** |
| AI 채팅 상담 | **리워드 광고 시청 후** | $0.01~0.03/회 |
| Google Drive 백업/복원 | 무료 | 없음 |

### 문제점
- **비용 구조가 역전**: 가장 비싼 기능(SMS Gemini 추출, 카테고리 분류)이 무료
- **수익원이 약함**: 유일한 수익원(채팅 광고)의 사용 빈도가 낮음
- **광고 수익 < API 비용**: 리워드 광고 1회 ~₩30~50 vs API 비용이 더 클 수 있음

---

## 2. 경쟁 앱 벤치마크

### 편한가계부 구독 모델

| 플랜 | 가격 | 월환산 |
|------|------|--------|
| 무료 | 0원 | 광고 수익 |
| 월 구독 | **2,900원/월** | 2,900원 |
| 연 구독 | **24,000원/년** | 2,000원 |
| 첫 해 프로모션 | **19,000원/년** (45% 할인) | 1,583원 |

### 편한가계부 무료 vs 구독 비교

| 기능 | 무료 | 구독 |
|------|------|------|
| 모든 가계부 기능 | O | O |
| 자산 생성 개수 | 15개 제한 | 무제한 |
| 광고 | 있음 | **제거** |
| PC 가계부 | 기본 | 고급 |
| 내역 동기화 | 수동 | **자동** |
| 사진 동기화 | 잠금 | O |

### 편한가계부 수익 전략 요약
- **핵심 기능은 전부 무료** (가계부 자체는 무료/구독 동일)
- **구독 유인 = "편의성"**: 광고 제거, 자동 동기화, 사진 등
- **광고가 주 수익**: 무료 사용자 대부분 -> 배너/전면 광고 수익이 베이스
- **구독은 보조 수익**: 파워 유저만 전환 (추정 전환율 3~5%)
- 서버 API 비용이 거의 없음 (로컬 처리 중심)

### 주요 경쟁 앱 비교

| 앱 | 수익 모델 | 핵심 차별점 |
|-----|----------|------------|
| 편한가계부 | 광고 + 구독 (₩2,900/월) | SMS 자동저장, PC 연동, 10년+ 운영 |
| 뱅크샐러드 | 무료 (금융상품 수수료) | 오픈뱅킹 자동 연동 |
| 토스 | 무료 (금융상품 수수료) | 계좌 통합 조회 |
| AI 가계부 | 광고 + 구독 | AI 분석 |

---

## 3. MoneyTalk 수익 모델 제안

### 하이브리드 모델 (광고 + 프리미엄 구독)

| 기능 | 무료 | 프리미엄 |
|------|------|----------|
| SMS 자동 파싱 (Regex) | O | O |
| SMS AI 파싱 (Gemini) | X | **O** |
| 카테고리 수동 분류 | O | O |
| 카테고리 AI 자동 분류 | **월 50건** | **무제한** |
| AI 채팅 상담 | **일 3회** | **무제한** |
| 광고 | 배너 광고 | **제거** |
| Google Drive 백업/복원 | O | O |
| 벡터 패턴 학습 (로컬) | O | O |

### 가격 설정 (안)

| 플랜 | 가격 | 월환산 |
|------|------|--------|
| 무료 | 0원 | 광고 수익 |
| 월 구독 | **1,900원/월** | 1,900원 |
| 연 구독 | **15,900원/년** | 1,325원 |
| 첫 해 프로모션 | **9,900원/년** (38% 할인) | 825원 |

> 편한가계부(₩2,900/월)보다 낮게 설정 — 후발주자 침투 가격 전략

### MoneyTalk vs 편한가계부 구독 유인 비교

| 구분 | 편한가계부 | MoneyTalk |
|------|----------|-----------|
| 구독 유인 | "편의성" (광고 제거, 자동 동기화) | **"AI 기능" (자동 분류, 재무 코칭)** |
| 전환 동기 강도 | 약함 (없어도 사용 가능) | **강함 (AI 없으면 수동 분류)** |
| 무료 체험 | 구독 기능 체험 불가 | **일 3회 + 월 50건으로 가치 체험** |

---

## 4. 수익 시뮬레이션

### MAU 1,000명 기준

#### 수익
| 항목 | 계산 | 월 수익 |
|------|------|---------|
| 배너 광고 (무료 유저 950명) | 950 x 일 3회 노출 x 30일 x ₩3 eCPM | ~₩256,000 |
| 구독 (전환율 5%, 50명) | 50 x ₩1,900 | ~₩95,000 |
| **합계** | | **~₩351,000/월** |

#### API 비용
| 항목 | 계산 | 월 비용 |
|------|------|---------|
| Gemini SMS 추출 (구독자) | 50명 x 주 1회 동기화 x 4주 x ~$0.10 | ~$20 (₩28,000) |
| AI 채팅 (구독자) | 50명 x 일 2회 x 30일 x $0.01 | ~$30 (₩42,000) |
| AI 채팅 (무료 일 3회) | 950명 x 일 0.5회 실사용 x 30일 x $0.01 | ~$142 (₩199,000) |
| **합계** | | **~₩269,000/월** |

#### 순이익
| 항목 | 금액 |
|------|------|
| 월 수익 | ₩351,000 |
| 월 API 비용 | ₩269,000 |
| **순이익** | **~₩82,000/월** |

### MAU 5,000명 기준 (규모 확장 시)

#### 수익
| 항목 | 계산 | 월 수익 |
|------|------|---------|
| 배너 광고 (무료 유저 4,750명) | 4,750 x 일 3회 x 30일 x ₩3 | ~₩1,282,000 |
| 구독 (전환율 5%, 250명) | 250 x ₩1,900 | ~₩475,000 |
| **합계** | | **~₩1,757,000/월** |

#### API 비용
| 항목 | 계산 | 월 비용 |
|------|------|---------|
| Gemini SMS (구독자) | 250 x 주 1회 x 4주 x $0.10 | ~$100 (₩140,000) |
| AI 채팅 (구독자) | 250 x 일 2회 x 30일 x $0.01 | ~$150 (₩210,000) |
| AI 채팅 (무료) | 4,750 x 일 0.5회 x 30일 x $0.01 | ~$712 (₩997,000) |
| **합계** | | **~₩1,347,000/월** |

#### 순이익
| 항목 | 금액 |
|------|------|
| 월 수익 | ₩1,757,000 |
| 월 API 비용 | ₩1,347,000 |
| **순이익** | **~₩410,000/월** |

---

## 5. 무료 체험 → 전환 전략

### 무료 사용자 AI 체험 설계

1. **일 3회 AI 채팅**: 앱 설치 후 AI 코칭의 가치를 직접 체험
2. **월 50건 AI 분류**: 한 달간 자동 분류 편의성 경험 후 수동 분류 불편함 인식
3. **SMS Regex 파싱은 무료 유지**: 기본 데이터 수집은 무료로 확보 → AI 분류 니즈 자연 발생

### 전환 유도 포인트

| 시점 | 메시지 | 기대 효과 |
|------|--------|----------|
| AI 분류 50건 소진 | "이번 달 AI 분류 한도를 모두 사용했습니다" | 수동 분류 불편함 체감 |
| 일 3회 채팅 소진 | "오늘 무료 AI 상담을 모두 사용했습니다" | AI 코칭 가치 인식 |
| 미분류 항목 누적 | "미분류 N건 — 프리미엄으로 자동 분류하세요" | 해결 욕구 자극 |
| 주간 리포트 | "AI 분석 리포트는 프리미엄에서 확인하세요" | FOMO 유발 |

---

## 6. 구현 우선순위

| 순서 | 항목 | 난이도 | 수익 영향 |
|------|------|--------|----------|
| 1 | 배너 광고 (전 화면) | 낮음 | 즉시 수익 |
| 2 | AI 채팅 일 3회 제한 (무료) | 낮음 | API 비용 절감 |
| 3 | AI 분류 월 50건 제한 (무료) | 중간 | API 비용 절감 |
| 4 | Google Play 구독 연동 | 높음 | 구독 수익 |
| 5 | 전환 유도 UI (한도 소진 메시지) | 중간 | 구독 전환율 향상 |
| 6 | 연 구독 할인 + 첫 해 프로모션 | 낮음 | LTV 향상 |

---

## 7. 리스크 및 고려사항

### API 비용 리스크
- 무료 AI 채팅(일 3회)이 전체 API 비용의 **~74%** 차지
- 무료 채팅 횟수를 일 1~2회로 줄이거나, 무료는 경량 모델(Flash) 사용 검토
- Gemini API 가격 변동 모니터링 필요

### 전환율 리스크
- 구독 전환율 5%는 낙관적 추정 (일반 앱 평균 2~3%)
- 전환율 2% 시 MAU 1,000명 순이익: ~₩44,000/월로 감소

### 경쟁 리스크
- 편한가계부: 10년+ 운영, 높은 인지도, SMS 파싱 정확도 성숙
- 뱅크샐러드/토스: 오픈뱅킹 기반 완전 자동화 (SMS 파싱 불필요)
- 차별점 = **AI 재무 코칭** (경쟁사에 없는 기능)

### 무료 → 유료 전환 시 이탈 리스크
- 기존 무료 사용자의 반발 가능
- 그래뉴라 마이그레이션: 기존 사용자에게 일정 기간 무료 프리미엄 제공

---

## 8. SMS 동기화 범위 제한 + 보상형 광고 모델

### 개요

첫 동기화 시 전체 SMS를 스캔하는 대신 **최근 3개월만 무료 동기화**하고,
나머지 과거 데이터는 **보상형 광고(Rewarded Ad) 시청 후 전체 동기화**로 해제한다.

### 무료 / 광고 해제 구분

| 구분 | 범위 | 비용 |
|------|------|------|
| 무료 (기본) | 최근 3개월 SMS | 없음 |
| 광고 시청 후 해제 | **전체 SMS** (기기 보유분 전량) | 보상형 광고 1회 |
| 실시간 수신 | 새 SMS 수신 즉시 처리 | 항상 무료 |

- **한번 동기화된 데이터는 영구 유지** — 광고를 다시 볼 필요 없음
- 실시간 수신(SmsReceiver)은 광고와 무관하게 항상 동작

### 수익성 분석 (1,000회 기준)

| 항목 | 금액 |
|------|------|
| **광고 수익** (보상형 eCPM ~$15) | **~$15 (₩20,000)** |
| **API 비용** (임베딩 무료 + LLM ~25건/회) | **~$2 (₩2,700)** |
| **순수익** | **~$13 (₩17,300)** |
| **수익률** | **약 7.5배** |

#### API 비용 상세 (전체 동기화 1회 평균)

| 단계 | 대상 건수 | 비용 |
|------|----------|------|
| Regex 처리 (Tier 1) | ~300건 (60%) | $0 |
| 사전 필터링 (100자+비결제) | ~125건 (25%) | $0 |
| 임베딩 생성 (text-embedding-004) | ~75건 | $0 (무료) |
| 벡터 캐시 히트 (Tier 2) | ~50건 | $0 |
| **LLM 호출 (Gemini Flash)** | **~25건 × 200 tokens** | **~$0.002** |

> 가정: 사용자당 평균 SMS 보유량 ~500건 (1~2년치)

### UI 흐름

```
[첫 설치 → 홈 화면]
  "최근 3개월 데이터를 동기화합니다" → 자동 실행
  ↓
[3개월 이전으로 스와이프 시]
  "이전 데이터가 없습니다"
  [📺 광고 보고 전체 데이터 불러오기] 버튼
  ↓
[광고 시청 완료]
  전체 SMS 동기화 시작 → 완료 후 전체 기간 조회 가능
```

### 데이터 구조

```kotlin
// DataStore 또는 SharedPreferences
data class SyncState(
    val oldestSyncedDate: Long,     // 가장 오래된 동기화 날짜
    val isFullSyncUnlocked: Boolean // 광고 시청으로 전체 해제 여부
)
```

### 구현 포인트

| # | 항목 | 설명 |
|---|------|------|
| 1 | SmsReader 날짜 범위 제한 | `readAllCardMessages()`에 startDate 파라미터 추가 |
| 2 | SyncState 저장 | DataStore에 동기화 범위/해제 상태 저장 |
| 3 | 보상형 광고 연동 | AdMob Rewarded Ad SDK 추가 (`build.gradle` 변경 필요) |
| 4 | 해제 후 전체 동기화 트리거 | 광고 콜백에서 `forceFullSync = true` 실행 |
| 5 | HorizontalPager 연동 | 미해제 상태에서 3개월 이전 페이지 접근 시 안내 UI |

### 주의사항

- 광고 로드 실패 시 폴백 필요 (네트워크 오프라인 등)
- 구독 사용자는 광고 없이 전체 동기화 자동 해제
- Google Play 정책: 보상형 광고는 사용자 선택형이므로 정책 위반 아님

---

## 9. Vector-First + LLM 아키텍처 (향후 개선안)

### 개요

현재 3-tier(Regex → Vector → LLM) 구조에서 **Regex의 역할을 사전 필터링으로 축소**하고,
**벡터 유사도 80%+ → LLM 검증/파싱** 구조로 전환하여 Regex 예외 케이스 유지보수를 제거한다.

### 현재 vs 제안

```
[현재 3-tier]
SMS → Regex(판별+파싱) → Vector(유사도) → LLM(추출)
      카드사별 패턴 유지    0.92/0.97 임계값  폴백

[제안 Vector-First]
SMS → Regex(사전필터링만) → Vector(80%+) → LLM(검증+파싱)
      100자/제외키워드       "결제 가능성"     "결제 맞음, 파싱 결과"
```

### 핵심 변경

| 구분 | 현재 | 제안 |
|------|------|------|
| Regex 역할 | 판별 + 파싱 (메인) | **사전 필터링만** (100자, 제외키워드) |
| Vector 역할 | 보조 (Regex 실패 시) | **메인 판별** (80%+ = 결제 가능성) |
| LLM 역할 | 최후 폴백 | **검증 + 파싱** (벡터 후보 확인) |
| 임계값 | confirm 0.92 / autoApply 0.97 | **suggest 0.80** 추가 |
| Regex 유지보수 | 카드사 추가 시 패턴 추가 필요 | **불필요** |

### Cold Start 해결: 시드 패턴 프리로드

벡터 DB가 비어있으면 80%+ 매칭이 불가능하므로 **앱 설치 시 시드 패턴 주입** 필수.

```
assets/seed_patterns.json
├── 신한카드 (체크/신용 × 일시불/할부) → 4패턴
├── 삼성카드 (체크/신용 × 일시불/할부) → 4패턴
├── 현대카드 (체크/신용 × 일시불/할부) → 4패턴
├── KB국민카드 → 4패턴
├── 롯데카드 → 4패턴
├── 우리카드 → 4패턴
├── 하나카드 → 4패턴
├── 농협카드 → 4패턴
└── 기타 (BC, IBK 등) → ~10패턴
총 ~40~50패턴, 임베딩 사전 생성하여 포함
```

- 임베딩은 빌드 타임에 생성 → **설치 시 API 호출 0**
- 시드 패턴만으로 주요 카드사 결제 SMS 80%+ 매칭 커버 가능

### 비용 비교 (전체 동기화 1회)

| 단계 | 현재 | 제안 |
|------|------|------|
| Regex 처리 | ~300건 (60%) | 사전 필터링만 |
| 벡터 처리 | ~50건 (캐시 히트) | ~300건 (80%+ 매칭) |
| LLM 호출 | ~25건 | ~40건 (초기), ~10건 (패턴 축적 후) |
| **총 LLM 비용** | **~$0.002** | **~$0.003 (초기) → ~$0.001 (안정화)** |

### 마이그레이션 단계

| Phase | 내용 | 리스크 |
|-------|------|--------|
| Phase 0 (현재) | 현행 3-tier 유지 | 없음 |
| Phase 1 | 시드 패턴 프리로드 구현 | 낮음 (기존 구조 변경 없음) |
| Phase 2 | suggest 0.80 임계값 추가 → LLM 호출 확대 | 중간 (LLM 비용 일시 증가) |
| Phase 3 | Regex 파싱 제거, 사전 필터링만 유지 | 높음 (롤백 플랜 필요) |

### 판단 기준

CLAUDE.md 리팩토링 기준에 따라, 아래 조건 중 **2개 이상** 충족 시 진행:
1. ✅ Regex 예외 케이스 유지보수 비용이 반복적으로 발생 (현대카드 등)
2. ⬜ 성능 문제가 측정 지표로 확인됨
3. ✅ 새 카드사/포맷 확장에서 Regex가 병목으로 작용

> 현재 1, 3번 충족 → **Phase 1(시드 패턴)부터 점진적 진행 가능**
